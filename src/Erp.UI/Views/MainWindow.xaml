<Window x:Class="Erp.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="ERP Desktop Offline" Height="620" Width="980" WindowStartupLocation="CenterScreen">
    <DockPanel Margin="10">
        <TextBlock DockPanel.Dock="Top" FontWeight="Bold" Margin="0,0,0,10" Text="{Binding CurrentUser, StringFormat=Usuário: {0}}"/>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0" Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBox Width="300" Margin="0,0,8,0" Text="{Binding Search, UpdateSourceTrigger=PropertyChanged}"/>
                    <Button Content="Buscar" Width="100" Command="{Binding SearchCommand}"/>
                </StackPanel>

                <DataGrid Grid.Row="1" ItemsSource="{Binding Products}" AutoGenerateColumns="False" IsReadOnly="True">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Código" Binding="{Binding Code}" Width="100"/>
                        <DataGridTextColumn Header="Descrição" Binding="{Binding Description}" Width="*"/>
                        <DataGridTextColumn Header="Preço" Binding="{Binding Price, StringFormat=N2}" Width="100"/>
                        <DataGridTextColumn Header="Estoque" Binding="{Binding Stock}" Width="80"/>
                        <DataGridCheckBoxColumn Header="Ativo" Binding="{Binding IsActive}" Width="80"/>
                        <DataGridTemplateColumn Header="Ações" Width="160">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="Editar" Margin="0,0,4,0" Command="{Binding DataContext.EditCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}"/>
                                        <Button Content="Excluir" Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0" VerticalAlignment="Center">
                    <Button Content="&lt;" Width="40" Command="{Binding PrevPageCommand}"/>
                    <TextBlock Margin="8,0" VerticalAlignment="Center" Text="{Binding CurrentPage, StringFormat=Página {0}}"/>
                    <TextBlock Margin="0,0,8,0" VerticalAlignment="Center" Text="{Binding TotalPages, StringFormat=de {0}}"/>
                    <Button Content=">" Width="40" Command="{Binding NextPageCommand}"/>
                </StackPanel>
            </Grid>

            <Border Grid.Column="1" Padding="12" BorderBrush="Gray" BorderThickness="1" CornerRadius="4">
                <StackPanel>
                    <TextBlock Text="Cadastro de Produtos" FontWeight="Bold" Margin="0,0,0,8"/>
                    <TextBlock Text="Código"/>
                    <TextBox Margin="0,0,0,8" Text="{Binding Editor.Code, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="Descrição"/>
                    <TextBox Margin="0,0,0,8" Text="{Binding Editor.Description, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="Preço"/>
                    <TextBox Margin="0,0,0,8" Text="{Binding Editor.Price, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBlock Text="Estoque"/>
                    <TextBox Margin="0,0,0,8" Text="{Binding Editor.Stock, UpdateSourceTrigger=PropertyChanged}"/>
                    <CheckBox Content="Ativo" Margin="0,0,0,8" IsChecked="{Binding Editor.IsActive}"/>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="Novo" Width="90" Margin="0,0,8,0" Command="{Binding NewCommand}"/>
                        <Button Content="Salvar" Width="90" Command="{Binding SaveCommand}"/>
                    </StackPanel>
                    <TextBlock Margin="0,12,0,0" Foreground="DarkGreen" TextWrapping="Wrap" Text="{Binding StatusMessage}"/>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
